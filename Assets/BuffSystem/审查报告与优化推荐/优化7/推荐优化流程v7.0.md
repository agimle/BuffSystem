# BuffSystem 推荐优化流程 v7.0

**文档版本：** v7.0  
**更新日期：** 2026-02-12  
**适用范围：** BuffSystem v7.x 版本优化  
**优先级策略：** 基础设施 → 核心功能 → 扩展功能 → 上层工具（从基层往上走）  
**前置条件：** 已完成v1.0-v6.x所有优化项  
**目标：** 达到100%生产就绪度

---

## 目录

1. [优化总览](#优化总览)
2. [Phase 1: 架构基础设施](#phase-1-架构基础设施)
3. [Phase 2: 核心文档与测试](#phase-2-核心文档与测试)
4. [Phase 3: 功能扩展](#phase-3-功能扩展)
5. [Phase 4: 工具与示例](#phase-4-工具与示例)
6. [优化实施检查清单](#优化实施检查清单)
7. [版本发布计划](#版本发布计划)
8. [附录：v7.0+ 未来扩展规划](#附录v70-未来扩展规划)

---

## 优化总览

### v7.0优化目标

```
┌─────────────────────────────────────────────────────────────┐
│                    BuffSystem v7.0 优化目标                  │
├─────────────────────────────────────────────────────────────┤
│  目标：补齐文档和测试短板，达到100%生产就绪度               │
├─────────────────────────────────────────────────────────────┤
│  基础设施：命名空间、Manager统一、API冻结                   │
│  核心文档：API稳定性文档、高级特性文档、迁移指南            │
│  测试验证：性能基准测试、对比报告、单元测试                 │
│  功能扩展：修饰器系统、Buff组、Fluent API                   │
│  上层工具：可视化调试窗口、性能监控器                       │
│  示例项目：5个完整示例（Basic/RPG/MOBA/Roguelike/Net）      │
└─────────────────────────────────────────────────────────────┘
```

### 依赖层级图

```
Layer 4: 示例项目、可视化工具（依赖下层）
    ↑
Layer 3: 功能扩展（Buff组、修饰器、Fluent API）
    ↑
Layer 2: 核心文档与测试（依赖Layer 1）
    ↑
Layer 1: 架构基础设施（必须先完成！）
```

### v6.x → v7.0演进

| 优化项 | v6.x状态 | v7.0目标 | 优先级 | 依赖层级 |
|--------|---------|---------|--------|----------|
| 命名空间重构 | ⬜ 待完成 | ✅ 完成 | 🔴 极高 | Layer 1 |
| Manager单例统一 | ⬜ 待完成 | ✅ 完成 | 🔴 极高 | Layer 1 |
| API稳定性文档 | ⬜ 待完成 | ✅ 完成 | 🔴 高 | Layer 2 |
| 性能基准测试 | ⬜ 待完成 | ✅ 完成 | 🔴 高 | Layer 2 |
| 单元测试 | ⬜ 待完成 | ✅ 完成 | 🟡 中 | Layer 2 |
| Buff修饰器系统 | ⬜ 待完成 | ✅ 完成 | 🟡 中 | Layer 3 |
| Buff组系统 | ⬜ 待完成 | ✅ 完成 | 🟡 中 | Layer 3 |
| Fluent API | ⬜ 待完成 | ✅ 完成 | 🟢 低 | Layer 3 |
| 可视化调试窗口 | ⬜ 待完成 | ✅ 完成 | 🟡 中 | Layer 4 |
| BasicUsage示例 | ⬜ 待完成 | ✅ 完成 | 🔴 高 | Layer 4 |
| RPGSystem示例 | ⬜ 待完成 | ✅ 完成 | 🟡 中 | Layer 4 |
| MOBASystem示例 | ⬜ 待完成 | ✅ 完成 | 🟡 中 | Layer 4 |

### 优化路线图（按依赖层级排序）

```
时间线：
─────────────────────────────────────────────────────────────────────────►

Week 1              Week 2-3              Week 4-5              Week 6-7
Phase 1: 基础设施   Phase 2: 文档测试     Phase 3: 功能扩展     Phase 4: 工具示例
        ▼                  ▼                     ▼                    ▼
   ┌──────────┐      ┌──────────┐        ┌──────────┐         ┌──────────┐
   │命名空间  │  →   │API文档   │   →    │修饰器    │   →    │调试窗口  │
   │重构      │      │稳定性    │        │Buff组    │        │示例项目  │
   │Manager   │      │测试框架  │        │Fluent API│        │          │
   │统一      │      │          │        │          │        │          │
   └──────────┘      └──────────┘        └──────────┘         └──────────┘
        ↑
   【必须先完成！】
```

---

## Phase 1: 架构基础设施（Week 1）

**优先级：** 🔴 极高（必须先完成！）  
**预估工时：** 3-4天  
**核心目标：** 建立稳定的基础设施，为后续所有工作奠定基础  
**原则：** 这一层不完成，后续所有工作都可能返工！

---

### 🔴 1.1 命名空间重构

**优先级：** 🔴 极高（Phase 1第一项！）  
**预估工时：** 1天  
**状态：** ⬜ 待完成  
**为什么先做：** 所有文档、测试、示例都需要引用正确的命名空间

#### 问题分析

当前命名空间分散，高级功能没有统一组织：
```csharp
// 当前问题：命名空间不统一
using BuffSystem.Combo;      // Combo单独命名空间
using BuffSystem.Fusion;     // Fusion单独命名空间
using BuffSystem.Transmission; // Transmission单独命名空间
// 没有统一的Advanced命名空间
```

#### 解决方案

重构命名空间层级：
```csharp
// 新命名空间结构
namespace BuffSystem.Core       // 核心接口和类
namespace BuffSystem.Data       // 数据配置
namespace BuffSystem.Runtime    // 运行时组件
namespace BuffSystem.Events     // 事件系统
namespace BuffSystem.Advanced   // 高级功能（统一！）
{
    namespace Combo        // BuffSystem.Advanced.Combo
    namespace Fusion       // BuffSystem.Advanced.Fusion
    namespace Transmission // BuffSystem.Advanced.Transmission
    namespace Area         // BuffSystem.Advanced.Area
    namespace Snapshot     // BuffSystem.Advanced.Snapshot
}
namespace BuffSystem.Networking // 网络同步
namespace BuffSystem.Editor     // 编辑器工具
namespace BuffSystem.Utils      // 工具类
```

#### 实施步骤

**步骤1: 创建新的命名空间文件夹结构**
```
Scripts/
├── Core/           # BuffSystem.Core
├── Data/           # BuffSystem.Data
├── Runtime/        # BuffSystem.Runtime
├── Events/         # BuffSystem.Events
├── Advanced/       # BuffSystem.Advanced
│   ├── Combo/      # BuffSystem.Advanced.Combo
│   ├── Fusion/     # BuffSystem.Advanced.Fusion
│   ├── Transmission/# BuffSystem.Advanced.Transmission
│   ├── Area/       # BuffSystem.Advanced.Area
│   └── Snapshot/   # BuffSystem.Advanced.Snapshot
├── Networking/     # BuffSystem.Networking
├── Editor/         # BuffSystem.Editor
└── Utils/          # BuffSystem.Utils
```

**步骤2: 移动文件并更新命名空间**
```csharp
// 原文件：Scripts/Combo/BuffComboManager.cs
// namespace BuffSystem.Combo;

// 新文件：Scripts/Advanced/Combo/BuffComboManager.cs
namespace BuffSystem.Advanced.Combo;
```

**步骤3: 添加向后兼容别名（可选）**
```csharp
// Scripts/Advanced/_Compatibility/NamespaceAliases.cs
#if BUFFSYSTEM_COMPATIBILITY_V6
namespace BuffSystem.Combo 
{ 
    using BuffSystem.Advanced.Combo;
    // 别名导出
}
#endif
```

**验收标准：**
- [ ] 所有文件移动到正确的命名空间文件夹
- [ ] 所有文件更新namespace声明
- [ ] 项目能正常编译
- [ ] 向后兼容别名（可选）

---

### 🔴 1.2 Manager单例模式统一

**优先级：** 🔴 极高（Phase 1第二项！）  
**预估工时：** 0.5天  
**状态：** ⬜ 待完成  
**为什么先做：** 影响所有Manager的访问方式，必须在文档前确定

#### 问题分析

当前各Manager使用不同的单例实现：
- `BuffComboManager` - 使用 `FindFirstObjectByType`
- `FusionManager` - 直接 `new GameObject`
- `TransmissionManager` - 直接 `new GameObject`

#### 解决方案

创建统一的 `BuffSystemManager`：
```csharp
// BuffSystem/Core/BuffSystemManager.cs
using UnityEngine;

namespace BuffSystem.Core
{
    [AddComponentMenu("BuffSystem/Buff System Manager")]
    [DefaultExecutionOrder(-200)]
    public class BuffSystemManager : MonoBehaviour
    {
        private static BuffSystemManager instance;
        
        public static BuffSystemManager Instance
        {
            get
            {
                if (instance == null) CreateInstance();
                return instance;
            }
        }

        // 子管理器引用
        [SerializeField] private BuffComboManager comboManager;
        [SerializeField] private FusionManager fusionManager;
        [SerializeField] private TransmissionManager transmissionManager;
        
        // 统一访问点
        public static BuffComboManager Combo => Instance.comboManager;
        public static FusionManager Fusion => Instance.fusionManager;
        public static TransmissionManager Transmission => Instance.transmissionManager;

        private static void CreateInstance()
        {
            instance = FindFirstObjectByType<BuffSystemManager>();
            if (instance == null)
            {
                var go = new GameObject("BuffSystemManager");
                instance = go.AddComponent<BuffSystemManager>();
                DontDestroyOnLoad(go);
            }
        }
        
        private void Awake()
        {
            if (instance != null && instance != this)
            {
                Destroy(gameObject);
                return;
            }
            instance = this;
            DontDestroyOnLoad(gameObject);
            
            InitializeManagers();
        }
        
        private void InitializeManagers()
        {
            if (comboManager == null)
                comboManager = gameObject.AddComponent<BuffComboManager>();
            if (fusionManager == null)
                fusionManager = gameObject.AddComponent<FusionManager>();
            if (transmissionManager == null)
                transmissionManager = gameObject.AddComponent<TransmissionManager>();
        }
    }
}
```

**子管理器修改：**
```csharp
// 修改前
public static BuffComboManager Instance { get; private set; }

// 修改后
public static BuffComboManager Instance => BuffSystemManager.Combo;
```

**验收标准：**
- [ ] BuffSystemManager创建完成
- [ ] 所有子管理器通过BuffSystemManager访问
- [ ] 向后兼容（可选）

---

### 🔴 1.3 API稳定性标记

**优先级：** 🔴 极高（Phase 1第三项！）  
**预估工时：** 0.5天  
**状态：** ⬜ 待完成  
**为什么先做：** 确定API冻结范围后，才能编写准确的API文档

#### 实施步骤

**步骤1: 创建稳定性属性**
```csharp
// BuffSystem/Core/Attributes/ApiStabilityAttribute.cs
namespace BuffSystem.Core
{
    public enum StabilityLevel
    {
        Experimental,  // 实验性，可能大幅修改
        Stable,        // 稳定，小版本保证兼容
        Frozen         // 冻结，永不修改
    }
    
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Interface | 
                    AttributeTargets.Method | AttributeTargets.Property)]
    public class ApiStabilityAttribute : Attribute
    {
        public StabilityLevel Level { get; }
        public string Since { get; }
        public string Notes { get; }
        
        public ApiStabilityAttribute(StabilityLevel level, string since, string notes = null)
        {
            Level = level;
            Since = since;
            Notes = notes;
        }
    }
}
```

**步骤2: 标记核心API**
```csharp
namespace BuffSystem.Core
{
    /// <summary>
    /// Buff实例接口
    /// </summary>
    [ApiStability(StabilityLevel.Frozen, "v7.0", "核心接口，永不修改")]
    public interface IBuff
    {
        // ...
    }
    
    [ApiStability(StabilityLevel.Frozen, "v7.0")]
    public class BuffOwner : MonoBehaviour, IBuffOwner
    {
        // ...
    }
}
```

**验收标准：**
- [ ] 所有核心接口标记Frozen
- [ ] 所有核心类标记Frozen
- [ ] 实验性功能标记Experimental

---

## Phase 2: 核心文档与测试（Week 2-3）

**优先级：** 🔴 高  
**预估工时：** 8-10天  
**核心目标：** 基于稳定的基础设施，完成文档和测试  
**依赖：** Phase 1完成后才能开始

---

### 🔴 2.1 API稳定性文档

**优先级：** 🔴 高  
**预估工时：** 2天  
**状态：** ⬜ 待完成  
**依赖：** Phase 1.3 API稳定性标记

#### 实施步骤

**创建文件：** `Documentation/API稳定性保证.md`

```markdown
# API稳定性保证

## v7.0+ 向后兼容承诺

以下API在v7.x、v8.x、v9.x中保证不变：

### 核心接口（永久冻结）
| 接口 | 命名空间 | 冻结版本 |
|------|----------|----------|
| IBuff | BuffSystem.Core | v7.0 |
| IBuffData | BuffSystem.Data | v7.0 |
| IBuffLogic | BuffSystem.Core | v7.0 |
| IEffect | BuffSystem.Core | v7.0 |
| IBuffOwner | BuffSystem.Core | v7.0 |

### 核心类（公开方法/属性冻结）
| 类 | 命名空间 | 冻结版本 |
|----|----------|----------|
| BuffOwner | BuffSystem.Core | v7.0 |
| BuffEntity | BuffSystem.Runtime | v7.0 |
| BuffContainer | BuffSystem.Runtime | v7.0 |
| BuffApi | BuffSystem.Core | v7.0 |
| BuffSystemManager | BuffSystem.Core | v7.0 |

### 枚举类型
| 枚举 | 命名空间 | 冻结版本 |
|------|----------|----------|
| BuffStackMode | BuffSystem.Core | v7.0 |
| BuffRemoveMode | BuffSystem.Core | v7.0 |
| UpdateMode | BuffSystem.Core | v7.0 |

## 如果必须修改

如果未来版本必须修改以上API：
1. 提供[Obsolete]标记的兼容层
2. 至少保留2个主版本
3. 提供自动迁移工具
```

**验收标准：**
- [ ] API稳定性保证文档完成
- [ ] 所有冻结API列出
- [ ] 修改策略明确

---

### 🔴 2.2 高级特性文档

**优先级：** 🔴 高  
**预估工时：** 2天  
**状态：** ⬜ 待完成  
**依赖：** Phase 1.1 命名空间重构

#### 文档清单

| 文档 | 路径 | 内容 |
|------|------|------|
| 传播系统 | `Documentation/传播系统.md` | Contact/Chain传播机制 |
| 融合系统 | `Documentation/融合系统.md` | 配方驱动Buff合成 |
| Combo系统 | `Documentation/Combo系统.md` | 连击Buff机制 |
| 区域系统 | `Documentation/区域系统.md` | BuffArea使用指南 |
| 快照系统 | `Documentation/快照系统.md` | 存档/读档机制 |
| 网络同步 | `Documentation/网络同步.md` | Mirror/Netcode集成 |

**验收标准：**
- [ ] 6篇高级特性文档完成
- [ ] 包含使用示例
- [ ] 包含配置说明

---

### 🔴 2.3 迁移指南

**优先级：** 🔴 高  
**预估工时：** 1天  
**状态：** ⬜ 待完成  
**依赖：** Phase 1.1 命名空间重构

#### 内容

```markdown
# v6.x 到 v7.0 迁移指南

## 破坏性变更

### 1. 命名空间变更
```csharp
// v6.x
using BuffSystem.Combo;
using BuffSystem.Fusion;

// v7.0
using BuffSystem.Advanced.Combo;
using BuffSystem.Advanced.Fusion;
```

### 2. Manager访问方式变更
```csharp
// v6.x
BuffComboManager.Instance.RegisterCombo(...);

// v7.0
BuffSystemManager.Combo.RegisterCombo(...);
```

## 迁移步骤

1. 更新所有using语句
2. 更新Manager访问代码
3. 重新编译测试
```

**验收标准：**
- [ ] 迁移指南完成
- [ ] 列出所有破坏性变更
- [ ] 提供迁移步骤

---

### 🔴 2.4 性能基准测试框架

**优先级：** 🔴 高  
**预估工时：** 3天  
**状态：** ⬜ 待完成  
**依赖：** Phase 1完成后才能准确测试

#### 实施步骤

**创建性能测试类：**
```csharp
// Tests/Performance/BuffPerformanceTests.cs
#if UNITY_EDITOR
using UnityEngine;
using UnityEditor;
using System.Diagnostics;

namespace BuffSystem.Tests
{
    public class BuffPerformanceTests
    {
        [MenuItem("BuffSystem/Tests/性能基准测试")]
        public static void RunBenchmarks()
        {
            var results = new PerformanceReport();
            
            results.AddTest("AddBuff", TestAddBuff());
            results.AddTest("Update", TestUpdate());
            results.AddTest("Query", TestQuery());
            results.AddTest("Remove", TestRemove());
            results.AddTest("Memory", TestMemory());
            
            results.Save("Assets/BuffSystem/Tests/Performance/Results/");
        }
        
        private static TestResult TestAddBuff()
        {
            var sw = Stopwatch.StartNew();
            // 测试代码...
            sw.Stop();
            return new TestResult("AddBuff", sw.ElapsedMilliseconds);
        }
    }
}
#endif
```

**验收标准：**
- [ ] 性能测试框架完成
- [ ] 5项基准测试
- [ ] 可生成报告

---

### 🟡 2.5 单元测试

**优先级：** 🟡 中  
**预估工时：** 3天  
**状态：** ⬜ 待完成  
**依赖：** Phase 1完成后

#### 测试清单

| 测试类 | 测试内容 |
|--------|----------|
| BuffContainerTests | 添加、移除、查询、更新 |
| BuffEntityTests | 生命周期、层数、持续时间 |
| BuffComboTests | Combo触发、超时、重置 |
| BuffFusionTests | 配方匹配、合成、失败 |

**验收标准：**
- [ ] 核心功能单元测试覆盖
- [ ] 测试通过率100%

---

## Phase 3: 功能扩展（Week 4-5）

**优先级：** 🟡 中  
**预估工时：** 6-8天  
**核心目标：** 基于稳定的核心，扩展功能  
**依赖：** Phase 2完成后

---

### 🟡 3.1 Buff修饰器系统

**优先级：** 🟡 中  
**预估工时：** 2天  
**状态：** ⬜ 待完成  
**依赖：** Phase 2核心功能稳定

#### 设计

```csharp
namespace BuffSystem.Modifiers
{
    public interface IBuffModifier
    {
        float DurationMultiplier { get; }
        float StackMultiplier { get; }
        bool CanModify(IBuff target);
    }
    
    [Serializable]
    public class BuffModifier : IBuffModifier
    {
        [SerializeField] private float durationMultiplier = 1f;
        [SerializeField] private float stackMultiplier = 1f;
        
        public float DurationMultiplier => durationMultiplier;
        public float StackMultiplier => stackMultiplier;
        public bool CanModify(IBuff target) => true;
    }
}
```

**验收标准：**
- [ ] 修饰器接口定义
- [ ] BuffApi支持修饰器参数
- [ ] 使用示例

---

### 🟡 3.2 Buff组系统

**优先级：** 🟡 中  
**预估工时：** 2天  
**状态：** ⬜ 待完成  
**依赖：** Phase 2核心功能稳定

#### 设计

```csharp
namespace BuffSystem.Groups
{
    public enum BuffGroupPolicy
    {
        ReplaceOldest,
        ReplaceWeakest,
        BlockNew,
        AllowAll
    }
    
    public interface IBuffGroup
    {
        string GroupId { get; }
        int MaxGroupStack { get; }
        BuffGroupPolicy Policy { get; }
    }
}
```

**验收标准：**
- [ ] Buff组接口定义
- [ ] 组策略实现
- [ ] 配置支持

---

### 🟢 3.3 Fluent API

**优先级：** 🟢 低  
**预估工时：** 1天  
**状态：** ⬜ 待完成  
**依赖：** Phase 2核心功能稳定

#### 设计

```csharp
namespace BuffSystem.Fluent
{
    public class BuffBuilder
    {
        private readonly IBuffOwner owner;
        private int buffId;
        private object source;
        private int stack = 1;
        private float? duration;
        
        public BuffBuilder(IBuffOwner owner) => this.owner = owner;
        
        public BuffBuilder Add(int buffId) { this.buffId = buffId; return this; }
        public BuffBuilder WithSource(object source) { this.source = source; return this; }
        public BuffBuilder WithStack(int stack) { this.stack = stack; return this; }
        public BuffBuilder WithDuration(float duration) { this.duration = duration; return this; }
        
        public IBuff Execute()
        {
            var buff = BuffApi.AddBuff(buffId, owner, source);
            if (buff != null && stack > 1) buff.AddStack(stack - 1);
            if (buff != null && duration.HasValue) buff.SetDuration(duration.Value);
            return buff;
        }
    }
}
```

**验收标准：**
- [ ] BuffBuilder实现
- [ ] 扩展方法
- [ ] 使用示例

---

## Phase 4: 工具与示例（Week 6-7）

**优先级：** 🟡 中  
**预估工时：** 8-10天  
**核心目标：** 基于完整的功能，提供工具和示例  
**依赖：** Phase 3功能扩展完成后

---

### 🔴 4.1 BasicUsage示例

**优先级：** 🔴 高  
**预估工时：** 2天  
**状态：** ⬜ 待完成  
**依赖：** Phase 3所有功能完成

#### 内容

- 场景：`Examples/BasicUsage/BasicUsageScene.unity`
- 代码：`Examples/BasicUsage/Scripts/BasicUsageExample.cs`
- 展示：添加、移除、查询Buff

**验收标准：**
- [ ] 可运行的Unity场景
- [ ] 包含基础API使用示例
- [ ] 详细中文注释

---

### 🟡 4.2 RPGSystem示例

**优先级：** 🟡 中  
**预估工时：** 3天  
**状态：** ⬜ 待完成  
**依赖：** Phase 3所有功能完成

#### 内容

- Hot（持续恢复）
- DoT（持续伤害）
- 属性增益/减益
- 控制效果（眩晕、冰冻）

**验收标准：**
- [ ] 5种以上RPG常见Buff
- [ ] 简单UI显示
- [ ] 可交互演示

---

### 🟡 4.3 MOBASystem示例

**优先级：** 🟡 中  
**预估工时：** 3天  
**状态：** ⬜ 待完成  
**依赖：** Phase 3所有功能完成

#### 内容

- 召唤师技能
- 装备被动效果
- 红蓝Buff
- 控制效果叠加规则

**验收标准：**
- [ ] MOBA常见机制展示
- [ ] 可交互演示

---

### 🟡 4.4 可视化调试窗口

**优先级：** 🟡 中  
**预估工时：** 3天  
**状态：** ⬜ 待完成  
**依赖：** Phase 3所有功能完成后才能调试

#### 设计

```csharp
#if UNITY_EDITOR
namespace BuffSystem.Editor
{
    public class BuffSystemDebugger : EditorWindow
    {
        [MenuItem("Window/BuffSystem/Debugger")]
        public static void ShowWindow()
        {
            GetWindow<BuffSystemDebugger>("Buff调试器");
        }
        
        // 功能：
        // - 显示所有BuffOwner
        // - 显示选中Owner的Buff详情
        // - 支持手动添加/移除Buff
        // - 显示性能统计
    }
}
#endif
```

**验收标准：**
- [ ] 可显示所有BuffOwner
- [ ] 可查看Buff详情
- [ ] 支持手动操作
- [ ] 自动刷新

---

### 🟢 4.5 性能监控器

**优先级：** 🟢 低  
**预估工时：** 2天  
**状态：** ⬜ 待完成  
**依赖：** Phase 2.4性能基准确定后

#### 设计

```csharp
namespace BuffSystem.Runtime
{
    [AddComponentMenu("BuffSystem/Performance Monitor")]
    public class BuffPerformanceMonitor : MonoBehaviour
    {
        [SerializeField] private bool showOnScreen = true;
        
        private void OnGUI()
        {
            if (!showOnScreen) return;
            
            GUILayout.BeginArea(new Rect(10, 10, 250, 120), GUI.skin.box);
            GUILayout.Label("BuffSystem 性能监控", EditorStyles.boldLabel);
            GUILayout.Label($"Buff总数: {GetTotalBuffCount()}");
            GUILayout.Label($"Owner数量: {BuffOwner.AllOwners.Count}");
            GUILayout.Label($"FPS: {1f / Time.unscaledDeltaTime:F0}");
            GUILayout.EndArea();
        }
    }
}
```

**验收标准：**
- [ ] 实时显示性能数据
- [ ] 可开关显示

---

## 优化实施检查清单

### Phase 1: 架构基础设施（Week 1）【必须先完成！】

- [x] **1.1 命名空间重构** (1天)
  - [x] 1.1.1 创建新的文件夹结构
  - [x] 1.1.2 移动文件到新位置
  - [x] 1.1.3 更新所有namespace声明
  - [x] 1.1.4 项目正常编译

- [x] **1.2 Manager单例统一** (0.5天)
  - [x] 1.2.1 创建BuffSystemManager
  - [x] 1.2.2 修改子管理器访问方式
  - [x] 1.2.3 向后兼容（可选）

- [x] **1.3 API稳定性标记** (0.5天)
  - [x] 1.3.1 创建ApiStabilityAttribute
  - [x] 1.3.2 标记所有核心接口
  - [x] 1.3.3 标记所有核心类

### Phase 2: 核心文档与测试（Week 2-3）【依赖Phase 1】

- [x] **2.1 API稳定性文档** (2天)
  - [x] 2.1.1 创建API稳定性保证文档
  - [x] 2.1.2 列出所有冻结API
  - [x] 2.1.3 编写修改策略

- [x] **2.2 高级特性文档** (2天)
  - [x] 2.2.1 传播系统文档
  - [x] 2.2.2 融合系统文档
  - [x] 2.2.3 Combo系统文档
  - [x] 2.2.4 区域系统文档
  - [x] 2.2.5 快照系统文档
  - [x] 2.2.6 网络同步文档

- [x] **2.3 迁移指南** (1天)
  - [x] 2.3.1 列出破坏性变更
  - [x] 2.3.2 编写迁移步骤

- [ ] **2.4 性能基准测试框架** (3天)
  - [ ] 2.4.1 创建性能测试类
  - [ ] 2.4.2 实现5项基准测试
  - [ ] 2.4.3 生成对比报告

- [ ] **2.5 单元测试** (3天)
  - [ ] 2.5.1 BuffContainer单元测试
  - [ ] 2.5.2 BuffEntity单元测试
  - [ ] 2.5.3 核心功能单元测试

### Phase 3: 功能扩展（Week 4-5）【依赖Phase 2】

- [x] **3.1 Buff修饰器系统** (2天)
  - [x] 3.1.1 定义IBuffModifier接口
  - [x] 3.1.2 BuffApi支持修饰器
  - [x] 3.1.3 编写使用示例

- [x] **3.2 Buff组系统** (2天)
  - [x] 3.2.1 定义IBuffGroup接口
  - [x] 3.2.2 实现组策略
  - [ ] 3.2.3 BuffDataSO支持组配置

- [x] **3.3 Fluent API** (1天)
  - [x] 3.3.1 实现BuffBuilder
  - [x] 3.3.2 添加扩展方法
  - [x] 3.3.3 编写使用示例

### Phase 4: 工具与示例（Week 6-7）【依赖Phase 3】

- [ ] **4.1 BasicUsage示例** (2天)
  - [ ] 4.1.1 创建示例场景
  - [ ] 4.1.2 编写示例代码
  - [ ] 4.1.3 添加详细注释

- [ ] **4.2 RPGSystem示例** (3天)
  - [ ] 4.2.1 Hot/DoT效果实现
  - [ ] 4.2.2 属性增益效果
  - [ ] 4.2.3 控制效果实现
  - [ ] 4.2.4 UI显示

- [ ] **4.3 MOBASystem示例** (3天)
  - [ ] 4.3.1 召唤师技能示例
  - [ ] 4.3.2 装备被动效果
  - [ ] 4.3.3 红蓝Buff示例

- [ ] **4.4 可视化调试窗口** (3天)
  - [ ] 4.4.1 BuffOwner列表显示
  - [ ] 4.4.2 Buff详情面板
  - [ ] 4.4.3 手动操作功能
  - [ ] 4.4.4 实时统计

- [ ] **4.5 性能监控器** (2天)
  - [ ] 4.5.1 运行时性能监控组件
  - [ ] 4.5.2 屏幕显示面板

---

## 版本发布计划

### v7.0.0 发布内容

```
基础设施:
├── 命名空间重构（BuffSystem.Advanced统一）
├── Manager单例统一（BuffSystemManager）
└── API稳定性标记

文档:
├── API稳定性保证文档
├── 高级特性文档（6篇）
└── 迁移指南

测试:
├── 性能基准测试框架
├── 性能对比报告
└── 单元测试

功能扩展:
├── Buff修饰器系统
├── Buff组系统
└── Fluent API

工具:
├── 可视化调试窗口
└── 性能监控器

示例:
├── BasicUsage示例
├── RPGSystem示例
└── MOBASystem示例
```

### 发布时间表

| 阶段 | 时间 | 里程碑 | 依赖 |
|------|------|--------|------|
| Phase 1 | Week 1 | 基础设施完成 | - |
| Phase 2 | Week 2-3 | 文档测试完成 | Phase 1 |
| Phase 3 | Week 4-5 | 功能扩展完成 | Phase 2 |
| Phase 4 | Week 6-7 | 工具示例完成 | Phase 3 |
| 发布 | Week 7末 | v7.0.0发布 | 全部 |

### 依赖关系图

```
Phase 4 (工具示例)
    ↑ 依赖
Phase 3 (功能扩展)
    ↑ 依赖
Phase 2 (文档测试)
    ↑ 依赖
Phase 1 (基础设施) ← 【必须先完成！】
```

### 验收标准

- [ ] Phase 1所有任务完成（基础设施）
- [ ] Phase 2所有任务完成（文档测试）
- [ ] Phase 3所有任务完成（功能扩展）
- [ ] Phase 4所有任务完成（工具示例）
- [ ] 综合评分达到9.7/10
- [ ] 生产就绪度达到100%
- [ ] 可对外发布v7.0正式版

### v7.0成功标准

```
基础设施:      ██████████████████████ 100% ✅
核心文档:      ██████████████████████ 100% ✅
测试覆盖:      ██████████████████████ 100% ✅
功能扩展:      ██████████████████████ 100% ✅
工具链完整:    ██████████████████████ 100% ✅
示例丰富:      ██████████████████████ 100% ✅

生产就绪度:    ██████████████████████ 100%
```

---

## 附录：v7.0+ 未来扩展规划

基于系统审查，以下功能建议作为v7.0之后的扩展方向，按优先级分类：

### 🎯 高优先级扩展（建议v7.1完成）

| 序号 | 扩展项 | 说明 | 预估工时 | 价值 |
|------|--------|------|----------|------|
| 1 | **Job System支持** | 使用Burst编译的并行Job处理大量Buff更新 | 3天 | 性能优化 |
| 2 | **配置验证工具** | 编辑器工具验证Buff配置的有效性 | 1天 | 减少运行时错误 |

### 📋 中优先级扩展（建议v7.2-v7.3完成）

| 序号 | 扩展项 | 说明 | 预估工时 | 价值 |
|------|--------|------|----------|------|
| 3 | **可视化调试工具增强** | Buff关系图谱、性能监控图表 | 2天 | 开发效率 |
| 4 | **Roguelike示例** | 随机Buff、叠加变异 | 2天 | 示例丰富 |
| 5 | **Networking示例** | Mirror/Netcode集成示例 | 2天 | 示例丰富 |

### 💡 低优先级扩展（长期规划v8.0+）

| 序号 | 扩展项 | 说明 | 预估工时 | 价值 |
|------|--------|------|----------|------|
| 6 | **Buff继承/模板系统** | Buff模板继承，减少重复配置 | 3天 | 配置便利性 |
| 7 | **Buff触发器系统** | 基于事件的触发器 | 2天 | 功能扩展 |
| 8 | **关系图谱可视化** | 编辑器中可视化Buff关系 | 2天 | 编辑器增强 |
| 9 | **SIMD优化** | Unity.Mathematics向量化计算 | 3天 | 极致性能 |

---

*文档版本：v7.0*  
*最后更新：2026-02-12*  
*目标：100%生产就绪*  
*核心原则：从基层往上走，先完成基础设施！*
